<?xml version="1.0" encoding="UTF-8"?>
<automaton>
  <name>Locking checker</name>
  <description>Checks lock_kernel and unlock_kernel locks</description>

  <state initial="true">
	<name>U</name> <!-- V ramci automatu unikatni -->
	<description>Unlocked</description>
	<transition> <!-- Kazdy state ma alespon jeden transition. Finalni stavy totiz za stavy nepovazujeme (neevidujeme je) -->
		<trigger>
			<pass>lock_kernel</pass> <!-- Predava se jako parametr metode loadTrigger  -->
			<class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
		</trigger><!-- Akce, pod kterou se prejde do <to> stavu-->
		<to>L</to><!-- Name stavu, do ktereho se prejde -->
	</transition>

	<transition>
		<trigger>
			<pass>unlock_kernel</pass>
                        <class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
		</trigger>
		<errmsg>Double unlock!!</errmsg><!-- Misto "to" muze byt errmsg. To znamena, ze se dostavame do chyboveho stavu. Automat konci -->
	</transition>

  </state>
  <state>
	<name>L</name>
	
	<description>Locked</description>
	<eor>
		<errmsg>End with locked!!</errmsg> <!-- Zde se nesmi skoncit (eor + errmsg)-->
	</eor>
	<transition>
		<trigger>
                    <pass>unlock_kernel</pass>
                    <class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
                </trigger>
		<to>U</to>
	</transition>
	<transition>
		<trigger>
                    <pass>lock_kernel</pass>
                    <class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
                </trigger>
		<errmsg>Double lock!!!</errmsg>

	</transition>
  </state>


</automaton>
