<?xml version="1.0" encoding="UTF-8"?>
<automaton>
  <name>Locking checker</name>
  <description>Checks locks with one argument as the name of the lock</description>

  <param>
	<id>x</id><!--  Unikatni ukazatel parametru. Tim se na nej potom muze odkazovat trigger -->
	<class>cz.muni.stanse.newchecker.AutomatonParamParamNames</class>
  </param><!-- Parametr mozna bude pro cely automat, ne jenom pro stav -->

  <state initial="true">
	<name>U</name> <!-- V ramci automatu unikatni -->
	<description>Unlocked</description>
	<transition> <!-- Kazdy state ma alespon jeden transition. Finalni stavy totiz za stavy nepovazujeme (neevidujeme je) -->
		<trigger>
			<pass>lock</pass> <!-- Predava se jako parametr metode loadTrigger  -->
			<class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
			<param>x</param>
		</trigger><!-- Akce, pod kterou se prejde do <to> stavu-->
		<to>L</to><!-- Name stavu, do ktereho se prejde -->
	</transition>

	<transition>
		<trigger>
			<pass>unlock</pass>
                        <class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
			<param>x</param><!-- Zde se odkazujeme na parametry. Na poradi zalezi. -->
		</trigger>
		<errmsg>Double unlock!!</errmsg><!-- Misto "to" muze byt errmsg. To znamena, ze se dostavame do chyboveho stavu. Automat konci -->
	</transition>

  </state>
  <state>
	<name>L</name>
	
	<description>Locked</description>
	<eor>
		<errmsg>End with locked!!</errmsg> <!-- Zde se nesmi skoncit (eor + errmsg)-->
	</eor>
	<transition>
		<trigger>
                    <pass>unlock</pass>
                    <class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
                    <param>x</param>
                </trigger>
		<to>U</to>
	</transition>
	<transition>
		<trigger>
                    <pass>lock</pass>
                    <class>cz.muni.stanse.newchecker.FunctionNameTrigger</class>
                    <param>x</param>
                </trigger>
		<errmsg>Double lock!!!</errmsg>

	</transition>
  </state>


</automaton>
